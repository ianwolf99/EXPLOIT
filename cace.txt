# Step-by-Step Guide to Cache YouTube, Facebook, Xbox, WhatsApp, Android, Windows, and iPhone on Ubuntu Server using Squid

## Step 1: Update your Ubuntu server
sudo apt update
sudo apt upgrade

## Step 2: Install Squid
sudo apt install squid

## Step 3: Configure Squid
sudo nano /etc/squid/squid.conf

## Step 4: Modify Squid configuration
- Find the `http_port` directive and specify the port number on which Squid will listen:
  http_port 3128

- Locate the `cache_dir` directive and set the cache directory path and size:
  cache_dir ufs /var/spool/squid 10000 16 256

- Scroll down and find the `https_port` directive. Uncomment it and specify the SSL port number:
  https_port 3129 ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=4MB

- Find the `ssl_bump` directive and add the following lines below it:
  ssl_bump server-first all
  sslproxy_cert_error allow all
  sslproxy_flags DONT_VERIFY_PEER

- Scroll further down and uncomment the `acl step1 at_step SslBump1` and `acl step2 at_step SslBump2` lines.

- Find the `sslcrtd_program` directive and uncomment it. Add the following line below it to create the SSL certificate cache directory:
  sslcrtd_program /usr/lib/squid/ssl_crtd -s /var/lib/ssl_db -M 4MB

- Scroll down to the `http_access` section and add the following lines to allow caching for specific websites. Adjust the domains and URLs as needed:
  acl youtube dstdomain .youtube.com
  cache allow youtube

  acl facebook dstdomain .facebook.com
  cache allow facebook

  acl xbox dstdomain .xbox.com
  cache allow xbox

  acl whatsapp dstdomain .whatsapp.com
  cache allow whatsapp

  acl android dstdomain .android.com
  cache allow android

  acl windows dstdomain .windows.com
  cache allow windows

  acl iphone dstdomain .iphone.com
  cache allow iphone

## Step 5: Restart Squid
sudo systemctl restart squid

## Step 6: Configure clients to use the Squid proxy
Configure client devices to use the IP address of your Ubuntu server and the port number (3128) specified in the `http_port` directive as the proxy server.

